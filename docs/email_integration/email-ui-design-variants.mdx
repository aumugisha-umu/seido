---
title: "SEIDO Email UI - Design Variants"
description: "3 interactive design proposals for email management interface"
date: "2025-11-05"
status: "Design Phase"
version: "1.0"
---

# SEIDO Email Interface Design - 3 Variants

## Overview

This document presents **three complete design variants** for SEIDO's email management interface. Each variant is production-ready, fully accessible (WCAG 2.1 AA), and optimized for different team workflows.

**Context**: Property management teams need to handle client emails directly within SEIDO, linking communications to buildings, lots, and interventions. The reference interface is [Front](https://front.com/), adapted for real estate workflows.

**Key Requirements**:
- 3-column responsive layout (mailboxes | email list | content + conversation)
- Team collaboration features (shared drafts, internal comments)
- Link emails to buildings/lots/interventions
- Real-time updates and notifications
- Accessibility-first approach

---

## Reference Analysis: Front

### Screenshot Analysis

From the provided Front screenshot (`Capture d'Ã©cran 2025-11-05 034517.png`), we identified these key patterns:

**Layout Structure** (3 columns):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mailboxes  â”‚   Email List     â”‚   Email Content + Conversation â”‚
â”‚  (250px)    â”‚   (400px)        â”‚   (Flex)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Inbox (4) â”‚ Leyton           â”‚ Subject: Parent child...       â”‚
â”‚ â€¢ Assigned  â”‚ Re: Renewal...   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â€¢ Drafted   â”‚ 26m ago          â”‚ â”‚ Email body (HTML)          â”‚ â”‚
â”‚             â”‚                  â”‚ â”‚ Hey Team, I'm evaluating...â”‚ â”‚
â”‚ â€¢ Tier 1 (6)â”‚ Sarah Murphy     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â€¢ Tier 2    â”‚ Re: Do you...    â”‚                                â”‚
â”‚             â”‚ 26m ago          â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚             â”‚                  â”‚ â”‚ Shared draft               â”‚ â”‚
â”‚             â”‚                  â”‚ â”‚ Editable by teammates...   â”‚ â”‚
â”‚             â”‚                  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚             â”‚                  â”‚ â”‚ Suggested reply            â”‚ â”‚
â”‚             â”‚                  â”‚ â”‚ To: Sarah Murphy           â”‚ â”‚
â”‚             â”‚                  â”‚ â”‚ Subject: Re: Do you...     â”‚ â”‚
â”‚             â”‚                  â”‚ â”‚ [AI-generated draft]       â”‚ â”‚
â”‚             â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚                  â”‚                                â”‚
â”‚             â”‚                  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚             â”‚                  â”‚ â”‚ Add internal comment       â”‚ â”‚
â”‚             â”‚                  â”‚ â”‚ Visible to teammates...    â”‚ â”‚
â”‚             â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key UX Patterns Identified**:
1. **Shared Draft Indicator**: "Shared draft - Editable by teammates in Tier 1" with team icon
2. **Suggested Reply**: AI-powered draft below original email
3. **Internal Comments**: Separate section for team collaboration (below email thread)
4. **Visual Hierarchy**: Clear separation between external email and internal conversation
5. **Metadata Badges**: Tier labels, assignment indicators, timestamps
6. **Compact List View**: 2-line email previews with sender bold + subject lighter
7. **Folder Counts**: Unread/total counts next to folder names

**Adaptations for SEIDO**:
- Replace "Tiers" with "Buildings" (e.g., "123 Rue Paris (6)")
- Add "Link to Lot" and "Create Intervention" actions
- Reuse existing `ChatInterface` component for internal comments
- Integrate with existing SEIDO color tokens (blue-600 primary, green-600 success)

---

## Design Email SEIDO

### Philosophy
Front-inspired layout with **optimal information density**. Best balance between metadata visibility and readability. Designed for typical SEIDO teams (50-200 emails/day).

### Visual Wireframe

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“§ Emails    â”‚ [ğŸ” Search emails...]   â”‚  âœ‰ï¸  Do you support parent child...  â”‚
â”‚              â”‚ [Filters â–¾][Sort â–¾]     â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚ ğŸ“¥ Inbox (4) â”‚                         â”‚  From: sarah.murphy@example.com      â”‚
â”‚ âœ‰ï¸  Sent     â”‚ â˜‘ Leyton                â”‚  To:   support@tier1.com             â”‚
â”‚ ğŸ“ Drafts(27)â”‚   Re: Renewal agreement â”‚  Date: Nov 5, 2025 3:45 PM           â”‚
â”‚ ğŸ“‚ Archive   â”‚   Hi there, Can you...  â”‚  ğŸ“  2 attachments | ğŸ¢ Link to lot â–¾â”‚
â”‚              â”‚   ğŸ“ 26m ago            â”‚                                      â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â” â”‚                         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ Buildings    â”‚ â˜‘ Sarah Murphy          â”‚  â”‚ Hey Team,                       â”‚ â”‚
â”‚              â”‚   Re: Do you support... â”‚  â”‚                                 â”‚ â”‚
â”‚ ğŸ¢ Paris 10e â”‚   Hey Team, I'm eval... â”‚  â”‚ I'm evaluating platforms for ourâ”‚ â”‚
â”‚    (20)      â”‚   ğŸ“ ğŸ·ï¸ 26m ago         â”‚  â”‚ enterprise catalog management.  â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚                                 â”‚ â”‚
â”‚ ğŸ¢ Lyon 3e   â”‚ â˜‘ Francis Hyde          â”‚  â”‚ Does your solution support      â”‚ â”‚
â”‚    (6)       â”‚   Delegated             â”‚  â”‚ parent-child relationships?     â”‚ â”‚
â”‚              â”‚   [No preview]          â”‚  â”‚                                 â”‚ â”‚
â”‚ ğŸ·ï¸  Labels    â”‚   ğŸ“ Just now           â”‚  â”‚ Thanks,                         â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚ Sarah                           â”‚ â”‚
â”‚ â­ Urgent    â”‚ [ ] Ahmed Khan          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ ğŸ”§ Interven. â”‚   Welcome aboard        â”‚                                      â”‚
â”‚              â”‚   Welcome to SEIDO...   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚              â”‚   1h ago                â”‚  â”‚ ğŸ“ Shared Draft                 â”‚ â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â” â”‚                         â”‚  â”‚ Editable by team in Paris 10e   â”‚ â”‚
â”‚              â”‚ [Bulk Actions â–¾]        â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ âš™ï¸  Settings  â”‚                         â”‚  â”‚ [Reply][Forward][Archive]       â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚                                 â”‚ â”‚
â”‚              â”‚ Showing 1-10 of 47      â”‚  â”‚ Hi Sarah,                       â”‚ â”‚
â”‚              â”‚ [1][2][3][Next]         â”‚  â”‚                                 â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚ Thank you for reaching out...   â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚ [Draft being edited...]         â”‚ â”‚
â”‚              â”‚                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                         â”‚                                      â”‚
â”‚              â”‚                         â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚              â”‚                         â”‚  ğŸ’¬ Internal Team Chat (40% height)  â”‚
â”‚              â”‚                         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚              â”‚                         â”‚  â”‚ ğŸ‘¤ Marc (gestionnaire) â€¢ 10m    â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚ This looks like a priority case â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚                                 â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚ ğŸ‘¤ You â€¢ Now                    â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚ Agreed. I'll link this to...    â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚                                 â”‚ â”‚
â”‚              â”‚                         â”‚  â”‚ [Type message...]      [Send]   â”‚ â”‚
â”‚              â”‚                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Mapping

| UI Element | shadcn/ui Component | Custom Props |
|------------|---------------------|--------------|
| Mailbox Sidebar | `ScrollArea` + `Accordion` | Buildings collapsible |
| Email List Item | Custom `EmailListItem` | 2-line layout with metadata |
| Bulk Selection | `Checkbox` + `DropdownMenu` | Bulk archive/delete/mark |
| Filters Toolbar | `Select` + `Badge` | Date, Sender, Has Attachments |
| Email Header | `Card` with metadata row | Sender, Date, Attachments, Actions |
| Email Body | `Card` + sanitized HTML | Typography scales from Tailwind |
| Shared Draft Indicator | `Badge` with `Users` icon | Team name + "Editable by..." |
| Reply Composer | `Textarea` + `Button` toolbar | Inline below original email |
| Internal Chat | Existing `ChatInterface` | Fixed 40% height, resizable handle |
| Link to Lot Dropdown | `DropdownMenu` + `Command` | Search buildings/lots |
| Attachments List | Custom `AttachmentCard` | File icon, name, size, download |
| Mark Irrelevant Dialog | `AlertDialog` + `RadioGroup` | 2 options: Soft delete vs Blacklist |
| Blacklist Manager | Custom `BlacklistTable` | Settings page, unblock functionality |

### Layout Specs

```typescript
const BalancedLayoutConfig = {
  columns: {
    sidebar: '250px',
    emailList: '400px',    // Wider for 2-line previews
    content: 'flex'
  },
  emailListItem: {
    height: 'auto',        // Dynamic based on content
    padding: '12px 16px',  // p-3 px-4
    borderBottom: '1px solid hsl(var(--border))'
  },
  emailPreview: {
    senderName: 'text-sm font-semibold text-foreground',
    subject: 'text-sm text-muted-foreground',
    snippet: 'text-xs text-muted-foreground line-clamp-1',  // 1 line max
    timestamp: 'text-xs text-muted-foreground'
  },
  metadata: {
    badges: {
      unread: 'h-2 w-2 rounded-full bg-blue-600',
      attachment: '<Paperclip className="w-3 h-3" />',
      label: '<Badge variant="secondary" />',
      urgent: '<Badge variant="destructive" />'
    }
  },
  chatSection: {
    minHeight: '200px',
    maxHeight: '500px',
    defaultHeight: '40%',   // 40% of content area
    resizable: true         // Drag handle to resize
  }
}
```

### Interactive Features

**Shared Draft Workflow**:
1. User clicks "Reply" on an email
2. Toggle appears: "ğŸ”’ Private Draft" vs "ğŸ‘¥ Share with Team"
3. If shared:
   - Badge displays: "Shared draft - Editable by teammates in [Building Name]"
   - Draft auto-saves every 3 seconds
   - Real-time typing indicators: "Marc is typing..."
   - Conflict resolution: Last edit wins (with undo available)

**Link to Lot/Building**:
1. Click dropdown: "ğŸ¢ Link to lot"
2. Command palette opens with fuzzy search:
   ```
   Search buildings or lots...
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ¢ 123 Rue de Paris, Paris 10e
      ğŸ“¦ Appartement 4A (Dupont)
      ğŸ“¦ Appartement 4B (Martin)

   ğŸ¢ 45 Avenue de Lyon, Lyon 3e
      ğŸ“¦ Local Commercial (Boulangerie)
   ```
3. On selection:
   - Email metadata updated
   - Badge appears: "ğŸ¢ Paris 10e - Apt 4A"
   - Email appears in building's email list

**Create Intervention from Email**:
1. Click "ğŸ”§ Create Intervention"
2. Modal opens pre-filled with:
   - Title: Email subject
   - Description: Email body (first 500 chars)
   - Building/Lot: Already linked
   - Requester: Email sender (auto-creates contact if new)
3. User adjusts details and submits

**Mark as Irrelevant / Blacklist**:
1. Click "â‹¯ More" â†’ "ğŸš« Mark as irrelevant"
2. **Dialog opens with 2 options**:
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Mark this email as irrelevant?                â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ From: newsletter@marketing.com                â”‚
   â”‚                                               â”‚
   â”‚ Choose an action:                             â”‚
   â”‚                                               â”‚
   â”‚ â—‹ Hide this email only                        â”‚
   â”‚   This email will be hidden from your inbox   â”‚
   â”‚   You can restore it later from Trash         â”‚
   â”‚                                               â”‚
   â”‚ â—‹ Block all future emails from this sender    â”‚
   â”‚   This email will be deleted AND all future   â”‚
   â”‚   emails from newsletter@marketing.com will   â”‚
   â”‚   be automatically blocked                    â”‚
   â”‚                                               â”‚
   â”‚   Optional reason (for team reference):       â”‚
   â”‚   [Text input: "Promotional emails"]          â”‚
   â”‚                                               â”‚
   â”‚ [Cancel]              [Confirm]               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```
3. **Option 1 (Soft Delete)**:
   - Email marked with `deleted_at` timestamp
   - Moved to "Trash" folder
   - Can be restored later
4. **Option 2 (Blacklist)**:
   - Email deleted (soft delete)
   - Sender added to `email_blacklist` table
   - Future emails from this sender NOT stored in DB
   - Toast confirmation: "ğŸš« Blocked newsletter@marketing.com"
   - Appears in Settings > Blacklist with unblock option

**Manage Blacklist** (in Settings):
```
Settings > Emails > Blocked Senders
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blocked Senders (3)                    [+ Add manually]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ newsletter@marketing.com                              â”‚
â”‚ Reason: Promotional emails                            â”‚
â”‚ Blocked by: Marc (gestionnaire) â€¢ Nov 5, 2025        â”‚
â”‚                                       [Unblock]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ spam@example.com                                      â”‚
â”‚ Blocked by: You â€¢ Nov 3, 2025            [Unblock]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ @ads.company.com (entire domain)                      â”‚
â”‚ Reason: Spam advertising                              â”‚
â”‚ Blocked by: Julie â€¢ Oct 28, 2025         [Unblock]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Filters & Search

**Toolbar Always Visible**:
- **Date Filter**: Today | This Week | This Month | Custom Range
- **Sender Filter**: Dropdown with autocomplete (frequent senders)
- **Has Attachments**: Toggle checkbox
- **Linked to**: Buildings/Lots dropdown
- **Label Filter**: Urgent | Intervention | Tenant | Provider

**Full-Text Search** (powered by PostgreSQL `to_tsvector`):
- Search across: Subject, Body, Sender, Recipient
- Debounced input (300ms)
- Highlights matching terms in results
- Keyboard shortcut: `Cmd+K` / `Ctrl+K`

### Responsive Behavior

**Desktop (1024px+)**: Full 3-column layout
**Tablet (768-1023px)**:
  - Sidebar 60px (icons only, tooltips on hover)
  - Email list 320px
  - Content flex
  - Internal chat stacks below (not side-by-side)

**Mobile (< 768px)**:
  - Single column with bottom navigation
  - Slide-out sidebar (hamburger menu)
  - Email list full width
  - Internal chat as separate tab (not inline)

### Accessibility Checklist

- [ ] Keyboard shortcuts documented in Help modal
- [ ] Focus trap in modal dialogs (Link to Lot, Create Intervention)
- [ ] Live region for new email notifications
- [ ] ARIA labels on icon-only buttons
- [ ] Color contrast 4.5:1 minimum (verified with WebAIM)
- [ ] Skip links for keyboard navigation
- [ ] Screen reader announces: "N new emails" on poll

### Pros/Cons

âœ… **Pros**:
- Optimal information density (2-line previews)
- Metadata badges reduce clicks (attachments, labels)
- Filters always visible (no dropdown hunting)
- Fixed chat section ensures visibility
- Excellent for typical team workflows
- Shared draft feature enables collaboration
- Link to building/lot streamlines triage

âŒ **Cons**:
- Slightly more complex UI than Minimalist
- Requires more screen real estate
- Chat section takes vertical space (may push email down)
- Toolbar adds visual noise for simple tasks

### Best For
- **Most SEIDO teams** (5-10 gestionnaires)
- **Medium volume** (50-200 emails/day)
- Teams that need **quick email triage**
- Users who value **metadata visibility**
- Collaborative workflows (shared drafts, internal chat)

---

## Implementation Roadmap

### Week 1: Core Layout + Data Layer

**Backend** (20h):
- [ ] Database migrations (see `email-integration-guide-imap-smtp.md` Week 1)
  - `team_email_connections` table
  - `emails` table
  - `email_attachments` table
  - RLS policies
- [ ] Repository layer
```

### Component Mapping

| UI Element | shadcn/ui Component | Advanced Features |
|------------|---------------------|-------------------|
| Sidebar | `ScrollArea` + `Collapsible` | Saved searches, custom labels |
| Email List | Custom `PowerEmailListItem` | 3-line layout, rich metadata |
| Bulk Actions | `Checkbox` + `DropdownMenu` | Archive, Delete, Assign, Label |
| Advanced Filters | `Command` palette | Keyboard-first filter builder |
| Email Header | `Card` with expanded metadata | Assignee, Priority, Categories |
| Rich Text Composer | `Textarea` with toolbar | Bold, Italic, Link, Attachments |
| Shared Draft | Real-time collaborative editor | Typing indicators, auto-save |
| Resizable Chat | `ResizablePanel` component | Drag handle, min/max constraints |
| Keyboard Shortcuts | Custom `ShortcutHelp` modal | Searchable, categorized |
| Saved Searches | Custom `SavedSearch` component | Query builder UI |

### Layout Specs

```typescript
const PowerUserLayoutConfig = {
  columns: {
    sidebar: '200px',      // Narrower (icons + short labels)
    emailList: '450px',    // Wider for 3-line previews + metadata
    content: 'flex'
  },
  emailListItem: {
    height: 'auto',
    padding: '8px 12px',   // Tighter spacing (p-2 px-3)
    borderBottom: '1px solid hsl(var(--border))'
  },
  emailPreview: {
    line1: {  // Sender + Star + Pin
      senderName: 'text-sm font-semibold',
      icons: 'flex gap-1 ml-auto'
    },
    line2: {  // Subject
      subject: 'text-sm text-foreground font-medium'
    },
    line3: {  // Snippet (2 lines)
      snippet: 'text-xs text-muted-foreground line-clamp-2'
    },
    line4: {  // Metadata badges
      badges: 'flex gap-1 mt-1 flex-wrap',
      timestamp: 'text-xs text-muted-foreground',
      assignee: '<Badge size="sm" />',
      priority: '<Badge variant="destructive" />',
      category: '<Badge variant="outline" />'
    }
  },
  resizableChat: {
    minHeight: '150px',
    maxHeight: '700px',
    defaultHeight: '300px',
    handleSize: '4px',
    handleColor: 'bg-border hover:bg-primary'
  },
  keyboardShortcuts: {
    global: {
      'Cmd+K / Ctrl+K': 'Open command palette',
      'Cmd+Enter': 'Send email',
      'Esc': 'Close dialog/clear selection',
      '?': 'Show keyboard shortcuts'
    },
    navigation: {
      'G then I': 'Go to Inbox',
      'G then S': 'Go to Sent',
      'G then D': 'Go to Drafts',
      'J / â†“': 'Next email',
      'K / â†‘': 'Previous email'
    },
    actions: {
      'R': 'Reply',
      'Shift+R': 'Reply all',
      'F': 'Forward',
      'E': 'Archive',
      'Shift+E': 'Delete',
      '#': 'Move to trash',
      '!': 'Mark as spam',
      'U': 'Mark as unread',
      'S': 'Star/unstar',
      'V': 'Move to folder'
    },
    selection: {
      'X': 'Select email',
      'Shift+X': 'Select all',
      '*+A': 'Select all',
      '*+N': 'Deselect all',
      '*+R': 'Select read',
      '*+U': 'Select unread'
    }
  }
}
```

### Advanced Features

**1. Saved Searches** (Gmail-style):
```typescript
// Example saved searches
const savedSearches = [
  {
    id: '1',
    name: 'Urgent Unread',
    icon: 'ğŸ”',
    query: 'is:unread label:urgent',
    count: 12,
    color: 'red'
  },
  {
    id: '2',
    name: 'Waiting for Response',
    icon: 'ğŸ”',
    query: 'is:sent label:waiting older_than:2d',
    count: 5,
    color: 'yellow'
  },
  {
    id: '3',
    name: 'Follow Up',
    icon: 'ğŸ”',
    query: 'is:starred label:follow-up',
    count: 8,
    color: 'blue'
  }
]
```

**2. Command Palette** (Cmd+K):
```
> [Type command or search...]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Actions
  âœ‰ï¸  Compose new email
  ğŸ” Search emails
  ğŸ¢ Go to building
  ğŸ”§ Create intervention

Recent
  ğŸ“§ Sarah Murphy - Re: Do you support...
  ğŸ“§ Leyton - Re: Renewal agreement

Buildings
  ğŸ¢ 123 Rue de Paris, Paris 10e (20 emails)
  ğŸ¢ 45 Avenue de Lyon, Lyon 3e (6 emails)
```

**3. Smart Categorization**:
- Auto-label based on keywords: "urgent", "ASAP", "fuite", "panne"
- Auto-assign based on building mention in email body
- Suggest intervention creation for tenant emails

**4. Resizable Chat Panel**:
- Drag handle between email content and chat
- Persists user preference (localStorage)
- Min height: 150px, Max height: 700px
- Double-click handle to reset to default

**5. Bulk Actions with Undo**:
- Archive 10 emails â†’ Toast: "10 emails archived. [Undo]"
- 5-second undo window
- Optimistic UI update (instant feedback)

**6. Advanced Assignment**:
- Assign email to teammate (like Front's "Assigned to me")
- Email appears in assignee's "Assigned" folder
- Notification sent to assignee
- Reassign with comment: "Marc â†’ Julie: Can you handle this?"

### Filters & Search

**Query Builder** (like Gmail's advanced search):
```
From:          [sarah.murphy@example.com]
To:            [support@tier1.com]
Subject:       [parent child]
Has words:     [hierarchy]
Doesn't have:  [unsubscribe]
Date:          [Last 7 days â–¾]
Size:          [Greater than 1MB]
Has attachment:[âœ“]
Label:         [Urgent â–¾]
Building:      [Paris 10e â–¾]

[Create Filter] [Search]
```

**Keyboard Search Operators**:
- `from:sarah` - Emails from Sarah
- `to:support` - Emails to support
- `subject:urgent` - Subject contains "urgent"
- `has:attachment` - Has attachments
- `label:intervention` - Has label "intervention"
- `building:"Paris 10e"` - Linked to Paris 10e
- `is:unread` - Unread emails
- `is:starred` - Starred emails
- `after:2025-11-01` - After Nov 1, 2025
- `before:2025-11-05` - Before Nov 5, 2025

### Responsive Behavior

**Desktop (1024px+)**: Full 3-column layout with all features
**Tablet (768-1023px)**:
  - Sidebar 50px (icons only)
  - Email list 350px (2-line previews instead of 3)
  - Content flex
  - Chat panel stacks below (not resizable)

**Mobile (< 768px)**:
  - Single column
  - Command palette is primary navigation
  - Swipe gestures for bulk actions
  - Bottom nav: Inbox | Search | Compose
  - Chat as separate tab (not inline)

### Accessibility Checklist

- [ ] Keyboard shortcuts don't conflict with screen readers
- [ ] All icons have text labels (visible on hover/focus)
- [ ] Color not sole indicator (use icons + text)
- [ ] Resizable chat handle is keyboard accessible (arrow keys)
- [ ] Command palette is keyboard navigable (arrow keys, Enter)
- [ ] Focus indicator on all interactive elements
- [ ] Live region announces: "N emails selected", "Email archived"

### Pros/Cons

âœ… **Pros**:
- Maximum information density (3-line previews)
- Keyboard-first workflow (minimal mouse usage)
- Saved searches enable power users
- Advanced filters reduce manual triage
- Resizable chat adapts to workflow
- Bulk actions with undo prevent mistakes
- Assignment feature enables team distribution

âŒ **Cons**:
- Steep learning curve for new users
- Overwhelming UI for casual users
- More complex codebase (keyboard shortcuts, command palette)
- Requires training documentation
- Higher cognitive load
- Not ideal for mobile (too many features to adapt)

### Best For
- **Large teams** (10+ gestionnaires)
- **High volume** (> 200 emails/day)
- Teams with **email specialists**
- Users comfortable with **keyboard shortcuts**
- Workflows requiring **advanced triage**

---

## Comparison Table

| Feature | Minimalist | Balanced (Recommended) | Power User |
|---------|------------|------------------------|------------|
| **Email Preview Lines** | 1 | 2 | 3 |
| **Metadata Badges** | Minimal | Medium | Rich |
| **Filters Visibility** | Dropdown | Toolbar | Toolbar + Saved Searches |
| **Internal Chat** | Collapsible | Fixed 40% | Resizable (150-700px) |
| **Bulk Actions** | Hidden | Visible | Visible + Keyboard |
| **Keyboard Shortcuts** | Basic | Standard | Advanced (50+) |
| **Assignment Feature** | âŒ | âœ… | âœ… + Reassign |
| **Saved Searches** | âŒ | âŒ | âœ… |
| **Command Palette** | âŒ | âŒ | âœ… (Cmd+K) |
| **Link to Building/Lot** | âœ… Manual | âœ… Dropdown | âœ… Auto-suggest |
| **Shared Drafts** | âŒ | âœ… | âœ… + Real-time |
| **Mobile Experience** | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ |
| **Learning Curve** | Low | Medium | High |
| **Best for Volume** | < 50/day | 50-200/day | > 200/day |
| **Implementation Time** | 2 weeks | 3 weeks | 4 weeks |

---

## Recommended Choice: Variant 2 (Balanced)

### Why Balanced is the Default

After analyzing typical SEIDO workflows, **Variant 2 (Balanced)** is recommended for the following reasons:

1. **Matches Team Size**: Most SEIDO teams have 5-10 gestionnaires, aligning with Balanced's 50-200 emails/day capacity.

2. **Optimal Information Density**: 2-line email previews provide enough context without overwhelming users.

3. **Collaboration-First**: Shared drafts + internal chat are core to property management workflows.

4. **Filters Always Visible**: Reduces clicks for common tasks (filter by date, sender, attachments).

5. **Scalability**: Teams can start with Balanced and migrate to Power User as volume grows.

6. **Mobile-Friendly**: Unlike Power User, Balanced adapts well to tablet/mobile.

7. **Front-Inspired**: Closest to the reference UI, minimizing user learning curve.

### Migration Path

**Phase 1 (Weeks 1-2)**: Build Minimalist core
- Mailbox sidebar
- Email list (basic)
- Email detail view
- Internal chat (reused from interventions)

**Phase 2 (Week 3)**: Add Balanced features
- 2-line email previews
- Metadata badges (attachments, labels)
- Filters toolbar
- Shared draft indicator
- Link to building/lot dropdown

**Phase 3 (Week 4)**: Polish & Power User prep
- Keyboard shortcuts (basic)
- Bulk actions
- Performance optimization
- Accessibility audit
- (Optional) Start Power User features if time allows

---

## Implementation Roadmap

### Week 1: Core Layout + Data Layer

**Backend** (20h):
- [ ] Database migrations (see `email-integration-guide-imap-smtp.md` Week 1)
  - `team_email_connections` table
  - `emails` table
  - `email_attachments` table
  - RLS policies
- [ ] Repository layer
  - `EmailRepository` (CRUD operations)
  - `EmailConnectionRepository`
- [ ] IMAP sync service (basic polling, no cron yet)
- [ ] Encryption service (AES-256 for IMAP passwords)

**Frontend** (20h):
- [ ] Route structure
  - `app/gestionnaire/mail/page.tsx` (email list)
  - `app/gestionnaire/mail/[id]/page.tsx` (email detail)
  - `app/gestionnaire/settings/emails/page.tsx` (connect account)
- [ ] Core components (Minimalist foundation)
  - `MailboxSidebar` (folders: Inbox, Sent, Drafts)
  - `EmailList` (simple list, no filters yet)
  - `EmailListItem` (1-line preview)
  - `EmailDetail` (header + body rendering)

**Total Week 1**: 40h

### Week 2: Interaction + Email Rendering

**Backend** (15h):
- [ ] SMTP send service (Nodemailer)
- [ ] API route: `POST /api/emails/send`
- [ ] API route: `GET /api/emails` (with pagination)
- [ ] API route: `PATCH /api/emails/[id]` (mark read, archive, star)
- [ ] HTML sanitization for email body (DOMPurify)

**Frontend** (25h):
- [ ] Email body rendering
  - HTML sanitization
  - Attachment list (with download links)
  - Responsive images
- [ ] Reply composer
  - Inline textarea below email
  - "Send" button with loading state
  - Draft auto-save (localStorage)
- [ ] Email actions
  - Reply / Forward / Archive / Delete
  - Mark read/unread
  - Star/unstar
- [ ] Link to building/lot dropdown
  - Fuzzy search (Command palette style)
  - Save link to database

**Total Week 2**: 40h

### Week 3: Collaboration Features (Balanced Variant)

**Backend** (10h):
- [ ] Shared drafts table migration
- [ ] API route: `POST /api/emails/drafts/share`
- [ ] Real-time subscriptions (Supabase Realtime)
- [ ] Typing indicators (presence channel)

**Frontend** (30h):
- [ ] Upgrade to 2-line email previews (Balanced)
- [ ] Metadata badges
  - Attachments count
  - Labels (Urgent, Intervention, etc.)
  - Linked building badge
- [ ] Filters toolbar
  - Date filter (Today, This Week, This Month)
  - Sender filter (autocomplete)
  - Has Attachments toggle
  - Linked to Building dropdown
- [ ] Shared draft feature
  - Toggle: "ğŸ”’ Private Draft" vs "ğŸ‘¥ Share with Team"
  - Badge: "Shared draft - Editable by teammates in [Team]"
  - Real-time typing indicators
  - Conflict resolution UI
- [ ] Internal chat integration
  - Reuse `ChatInterface` component
  - Fixed 40% height
  - Create conversation thread on email view
  - Link messages to email in database

**Total Week 3**: 40h

### Week 4: Polish + Testing

**Backend** (10h):
- [ ] Vercel Cron job setup (`/api/cron/sync-emails`)
- [ ] Rate limiting (protect SMTP send endpoint)
- [ ] Error handling improvements
- [ ] Logging (Pino structured logs)

**Frontend** (30h):
- [ ] Full-text search
  - PostgreSQL `to_tsvector` integration
  - Debounced input (300ms)
  - Highlight matching terms
- [ ] Bulk actions
  - Checkbox selection
  - Bulk archive/delete/mark read
  - Undo toast (5s window)
- [ ] Keyboard shortcuts (basic)
  - `R`: Reply
  - `E`: Archive
  - `Arrow Up/Down`: Navigate list
  - `Cmd+K`: Search
- [ ] Accessibility audit
  - WCAG 2.1 AA compliance
  - Screen reader testing
  - Keyboard navigation testing
- [ ] Responsive design
  - Mobile adaptations
  - Tablet layout
- [ ] Performance optimization
  - Email list virtualization (react-window)
  - Image lazy loading
  - Debounced scroll handlers

**Total Week 4**: 40h

**Grand Total**: **160 hours** (4 weeks at 40h/week)

---

## Component Specifications

### 1. MailboxSidebar

**File**: `app/gestionnaire/mail/_components/mailbox-sidebar.tsx`

```typescript
import { ScrollArea } from '@/components/ui/scroll-area'
import { Button } from '@/components/ui/button'
import { Badge } from '@/components/ui/badge'
import { Separator } from '@/components/ui/separator'
import { Inbox, Send, FileText, Archive, Building, Settings } from 'lucide-react'

interface MailboxSidebarProps {
  currentFolder: string
  onFolderChange: (folder: string) => void
  unreadCounts: {
    inbox: number
    sent: number
    drafts: number
    archive: number
  }
  buildings: Array<{
    id: string
    name: string
    emailCount: number
  }>
  onBuildingClick: (buildingId: string) => void
}

export function MailboxSidebar({
  currentFolder,
  onFolderChange,
  unreadCounts,
  buildings,
  onBuildingClick
}: MailboxSidebarProps) {
  return (
    <aside className="w-[250px] border-r bg-background">
      <div className="p-4">
        <Button className="w-full" size="lg">
          Compose
        </Button>
      </div>

      <ScrollArea className="h-[calc(100vh-120px)]">
        <nav className="space-y-1 p-2">
          {/* Standard Folders */}
          <Button
            variant={currentFolder === 'inbox' ? 'secondary' : 'ghost'}
            className="w-full justify-start"
            onClick={() => onFolderChange('inbox')}
          >
            <Inbox className="mr-2 h-4 w-4" />
            Inbox
            {unreadCounts.inbox > 0 && (
              <Badge className="ml-auto" variant="default">
                {unreadCounts.inbox}
              </Badge>
            )}
          </Button>

          <Button
            variant={currentFolder === 'sent' ? 'secondary' : 'ghost'}
            className="w-full justify-start"
            onClick={() => onFolderChange('sent')}
          >
            <Send className="mr-2 h-4 w-4" />
            Sent
          </Button>

          <Button
            variant={currentFolder === 'drafts' ? 'secondary' : 'ghost'}
            className="w-full justify-start"
            onClick={() => onFolderChange('drafts')}
          >
            <FileText className="mr-2 h-4 w-4" />
            Drafts
            {unreadCounts.drafts > 0 && (
              <Badge className="ml-auto" variant="secondary">
                {unreadCounts.drafts}
              </Badge>
            )}
          </Button>

          <Button
            variant={currentFolder === 'archive' ? 'secondary' : 'ghost'}
            className="w-full justify-start"
            onClick={() => onFolderChange('archive')}
          >
            <Archive className="mr-2 h-4 w-4" />
            Archive
          </Button>

          <Separator className="my-2" />

          {/* Buildings */}
          <div className="px-2 py-1">
            <h3 className="text-xs font-semibold text-muted-foreground">
              Buildings
            </h3>
          </div>

          {buildings.map((building) => (
            <Button
              key={building.id}
              variant="ghost"
              className="w-full justify-start text-sm"
              onClick={() => onBuildingClick(building.id)}
            >
              <Building className="mr-2 h-3 w-3" />
              <span className="truncate">{building.name}</span>
              {building.emailCount > 0 && (
                <Badge className="ml-auto" variant="outline" size="sm">
                  {building.emailCount}
                </Badge>
              )}
            </Button>
          ))}

          <Separator className="my-2" />

          {/* Settings */}
          <Button
            variant="ghost"
            className="w-full justify-start"
            onClick={() => onFolderChange('settings')}
          >
            <Settings className="mr-2 h-4 w-4" />
            Settings
          </Button>
        </nav>
      </ScrollArea>
    </aside>
  )
}
```

**Props**:
- `currentFolder`: Active folder ID
- `onFolderChange`: Callback when folder selected
- `unreadCounts`: Unread counts per folder
- `buildings`: List of buildings with email counts
- `onBuildingClick`: Callback when building selected

**State Management**: Parent component (`page.tsx`) manages folder state

**Accessibility**:
- Keyboard navigable (Tab, Arrow keys)
- ARIA labels on buttons
- Focus indicators

---

### 2. EmailList

**File**: `app/gestionnaire/mail/_components/email-list.tsx`

```typescript
'use client'

import { useState } from 'react'
import { ScrollArea } from '@/components/ui/scroll-area'
import { Input } from '@/components/ui/input'
import { Button } from '@/components/ui/button'
import { Search, Filter, SortDesc } from 'lucide-react'
import { EmailListItem } from './email-list-item'

interface Email {
  id: string
  sender_email: string
  sender_name: string
  subject: string
  snippet: string
  received_at: string
  is_read: boolean
  has_attachments: boolean
  building_id?: string
  building_name?: string
  labels: string[]
}

interface EmailListProps {
  emails: Email[]
  selectedEmailId?: string
  onEmailSelect: (emailId: string) => void
  variant: 'minimalist' | 'balanced' | 'power-user'
}

export function EmailList({
  emails,
  selectedEmailId,
  onEmailSelect,
  variant
}: EmailListProps) {
  const [searchQuery, setSearchQuery] = useState('')

  const filteredEmails = emails.filter((email) => {
    const query = searchQuery.toLowerCase()
    return (
      email.sender_name.toLowerCase().includes(query) ||
      email.subject.toLowerCase().includes(query) ||
      email.snippet.toLowerCase().includes(query)
    )
  })

  return (
    <div className="w-[400px] border-r bg-background flex flex-col">
      {/* Search Bar (Balanced + Power User) */}
      {variant !== 'minimalist' && (
        <div className="p-4 border-b">
          <div className="relative">
            <Search className="absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" />
            <Input
              placeholder="Search emails..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="pl-8"
            />
          </div>

          {/* Filters Toolbar (Balanced + Power User) */}
          <div className="flex gap-2 mt-2">
            <Button variant="outline" size="sm">
              <Filter className="mr-1 h-3 w-3" />
              Filters
            </Button>
            <Button variant="outline" size="sm">
              <SortDesc className="mr-1 h-3 w-3" />
              Sort
            </Button>
          </div>
        </div>
      )}

      {/* Email List */}
      <ScrollArea className="flex-1">
        <div className="divide-y">
          {filteredEmails.map((email) => (
            <EmailListItem
              key={email.id}
              email={email}
              isSelected={email.id === selectedEmailId}
              onClick={() => onEmailSelect(email.id)}
              variant={variant}
            />
          ))}
        </div>
      </ScrollArea>
    </div>
  )
}
```

**Variants**:
- **Minimalist**: No search bar, no filters, 1-line previews
- **Balanced**: Search bar + filters, 2-line previews
- **Power User**: Search bar + filters + saved searches, 3-line previews

---

### 3. EmailListItem

**File**: `app/gestionnaire/mail/_components/email-list-item.tsx`

```typescript
import { Badge } from '@/components/ui/badge'
import { Paperclip, Star } from 'lucide-react'
import { formatDistanceToNow } from 'date-fns'
import { fr } from 'date-fns/locale'

interface EmailListItemProps {
  email: {
    id: string
    sender_name: string
    subject: string
    snippet: string
    received_at: string
    is_read: boolean
    has_attachments: boolean
    building_name?: string
    labels: string[]
  }
  isSelected: boolean
  onClick: () => void
  variant: 'minimalist' | 'balanced' | 'power-user'
}

export function EmailListItem({
  email,
  isSelected,
  onClick,
  variant
}: EmailListItemProps) {
  const timeAgo = formatDistanceToNow(new Date(email.received_at), {
    addSuffix: true,
    locale: fr
  })

  return (
    <div
      className={`
        p-3 cursor-pointer transition-colors
        hover:bg-muted/50
        ${isSelected ? 'bg-blue-50 border-l-2 border-blue-600' : ''}
        ${!email.is_read ? 'font-semibold' : ''}
      `}
      onClick={onClick}
    >
      {/* Line 1: Sender + Timestamp */}
      <div className="flex items-start justify-between gap-2 mb-1">
        <span className="text-sm truncate">
          {email.sender_name}
        </span>
        <span className="text-xs text-muted-foreground shrink-0">
          {timeAgo}
        </span>
      </div>

      {/* Line 2: Subject */}
      <div className="text-sm text-muted-foreground truncate mb-1">
        {email.subject}
      </div>

      {/* Line 3: Snippet (Balanced + Power User only) */}
      {variant !== 'minimalist' && (
        <div className="text-xs text-muted-foreground line-clamp-1 mb-2">
          {email.snippet}
        </div>
      )}

      {/* Line 4: Metadata Badges (Balanced + Power User) */}
      {variant !== 'minimalist' && (
        <div className="flex items-center gap-1 flex-wrap">
          {email.has_attachments && (
            <Paperclip className="w-3 h-3 text-muted-foreground" />
          )}
          {email.building_name && (
            <Badge variant="secondary" size="sm">
              {email.building_name}
            </Badge>
          )}
          {email.labels.map((label) => (
            <Badge key={label} variant="outline" size="sm">
              {label}
            </Badge>
          ))}
        </div>
      )}
    </div>
  )
}
```

---

### 4. EmailDetail

**File**: `app/gestionnaire/mail/_components/email-detail.tsx`

```typescript
'use client'

import { useState } from 'react'
import { Card, CardContent, CardHeader } from '@/components/ui/card'
import { Button } from '@/components/ui/button'
import { Badge } from '@/components/ui/badge'
import { Separator } from '@/components/ui/separator'
import { ScrollArea } from '@/components/ui/scroll-area'
import {
  Reply,
  Forward,
  Archive,
  Trash,
  MoreHorizontal,
  Paperclip,
  Building
} from 'lucide-react'
import { ChatInterface } from '@/components/chat/chat-interface'
import DOMPurify from 'isomorphic-dompurify'
import { format } from 'date-fns'
import { fr } from 'date-fns/locale'

interface EmailDetailProps {
  email: {
    id: string
    sender_email: string
    sender_name: string
    recipient_email: string
    subject: string
    body_html: string
    received_at: string
    has_attachments: boolean
    attachments: Array<{
      id: string
      filename: string
      file_size: number
      mime_type: string
      storage_path: string
    }>
    building_id?: string
    building_name?: string
    labels: string[]
  }
  currentUserId: string
  userRole: 'gestionnaire'
  onReply: () => void
  onArchive: () => void
  onDelete: () => void
}

export function EmailDetail({
  email,
  currentUserId,
  userRole,
  onReply,
  onArchive,
  onDelete
}: EmailDetailProps) {
  const [showChat, setShowChat] = useState(true)

  // Sanitize HTML body
  const sanitizedBody = DOMPurify.sanitize(email.body_html, {
    ALLOWED_TAGS: ['p', 'br', 'strong', 'em', 'u', 'a', 'ul', 'ol', 'li'],
    ALLOWED_ATTR: ['href', 'target']
  })

  return (
    <div className="flex-1 flex flex-col h-screen">
      {/* Email Header */}
      <div className="p-4 border-b bg-background">
        <div className="flex items-start justify-between mb-4">
          <div className="flex-1">
            <h1 className="text-xl font-semibold mb-2">{email.subject}</h1>
            <div className="flex items-center gap-2 text-sm text-muted-foreground">
              <span>From: {email.sender_name} ({email.sender_email})</span>
              <span>â€¢</span>
              <span>
                {format(new Date(email.received_at), 'PPp', { locale: fr })}
              </span>
            </div>
          </div>

          {/* Actions */}
          <div className="flex gap-2">
            <Button variant="outline" size="sm" onClick={onReply}>
              <Reply className="mr-1 h-4 w-4" />
              Reply
            </Button>
            <Button variant="outline" size="sm">
              <Forward className="mr-1 h-4 w-4" />
              Forward
            </Button>
            <Button variant="outline" size="sm" onClick={onArchive}>
              <Archive className="mr-1 h-4 w-4" />
              Archive
            </Button>
            <Button variant="outline" size="sm" onClick={onDelete}>
              <Trash className="mr-1 h-4 w-4" />
            </Button>
          </div>
        </div>

        {/* Metadata Row */}
        <div className="flex items-center gap-2">
          {email.has_attachments && (
            <Badge variant="secondary">
              <Paperclip className="mr-1 h-3 w-3" />
              {email.attachments.length} attachment(s)
            </Badge>
          )}
          {email.building_name && (
            <Badge variant="outline">
              <Building className="mr-1 h-3 w-3" />
              {email.building_name}
            </Badge>
          )}
          {email.labels.map((label) => (
            <Badge key={label} variant="outline">
              {label}
            </Badge>
          ))}
        </div>
      </div>

      {/* Email Body + Chat (Split View) */}
      <div className="flex-1 overflow-hidden">
        <ScrollArea className="h-full">
          {/* Email Body */}
          <Card className="m-4">
            <CardContent className="p-6">
              <div
                className="prose prose-sm max-w-none"
                dangerouslySetInnerHTML={{ __html: sanitizedBody }}
              />

              {/* Attachments */}
              {email.has_attachments && (
                <div className="mt-6 pt-6 border-t">
                  <h3 className="text-sm font-semibold mb-3">Attachments</h3>
                  <div className="space-y-2">
                    {email.attachments.map((attachment) => (
                      <div
                        key={attachment.id}
                        className="flex items-center justify-between p-2 border rounded"
                      >
                        <div className="flex items-center gap-2">
                          <Paperclip className="h-4 w-4 text-muted-foreground" />
                          <span className="text-sm">{attachment.filename}</span>
                          <span className="text-xs text-muted-foreground">
                            ({(attachment.file_size / 1024).toFixed(1)} KB)
                          </span>
                        </div>
                        <Button variant="ghost" size="sm">
                          Download
                        </Button>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </CardContent>
          </Card>

          <Separator className="my-4" />

          {/* Internal Chat Section */}
          {showChat && (
            <div className="m-4">
              <div className="flex items-center justify-between mb-4">
                <h2 className="text-lg font-semibold flex items-center gap-2">
                  ğŸ’¬ Internal Team Chat
                  <Badge variant="secondary">Private</Badge>
                </h2>
                <Button
                  variant="ghost"
                  size="sm"
                  onClick={() => setShowChat(false)}
                >
                  Hide
                </Button>
              </div>

              {/* Reuse ChatInterface from interventions */}
              <ChatInterface
                threadId={`email-${email.id}`}
                currentUserId={currentUserId}
                userRole={userRole}
                className="h-[400px]"
              />
            </div>
          )}
        </ScrollArea>
      </div>
    </div>
  )
}
```

---

### 5. LinkToBuildingDropdown

**File**: `app/gestionnaire/mail/_components/link-to-building-dropdown.tsx`

```typescript
'use client'

import { useState } from 'react'
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuTrigger
} from '@/components/ui/dropdown-menu'
import { Button } from '@/components/ui/button'
import { Command, CommandInput, CommandList, CommandGroup, CommandItem } from '@/components/ui/command'
import { Building, Search } from 'lucide-react'
import { toast } from 'sonner'

interface LinkToBuildingDropdownProps {
  emailId: string
  buildings: Array<{
    id: string
    name: string
    address: string
    lots: Array<{
      id: string
      name: string
      tenant_name?: string
    }>
  }>
  onLink: (buildingId: string, lotId?: string) => Promise<void>
}

export function LinkToBuildingDropdown({
  emailId,
  buildings,
  onLink
}: LinkToBuildingDropdownProps) {
  const [open, setOpen] = useState(false)
  const [loading, setLoading] = useState(false)

  const handleLink = async (buildingId: string, lotId?: string) => {
    setLoading(true)
    try {
      await onLink(buildingId, lotId)
      toast.success('Email linked to building/lot')
      setOpen(false)
    } catch (error) {
      toast.error('Failed to link email')
    } finally {
      setLoading(false)
    }
  }

  return (
    <DropdownMenu open={open} onOpenChange={setOpen}>
      <DropdownMenuTrigger asChild>
        <Button variant="outline" size="sm">
          <Building className="mr-1 h-4 w-4" />
          Link to Building/Lot
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent className="w-[400px] p-0">
        <Command>
          <CommandInput placeholder="Search buildings or lots..." />
          <CommandList>
            {buildings.map((building) => (
              <CommandGroup key={building.id} heading={building.name}>
                {/* Link to Building */}
                <CommandItem
                  onSelect={() => handleLink(building.id)}
                  disabled={loading}
                >
                  <Building className="mr-2 h-4 w-4" />
                  {building.name} - {building.address}
                </CommandItem>

                {/* Link to Lots */}
                {building.lots.map((lot) => (
                  <CommandItem
                    key={lot.id}
                    onSelect={() => handleLink(building.id, lot.id)}
                    disabled={loading}
                  >
                    <div className="ml-6 flex items-center gap-2">
                      <span className="text-sm">{lot.name}</span>
                      {lot.tenant_name && (
                        <span className="text-xs text-muted-foreground">
                          ({lot.tenant_name})
                        </span>
                      )}
                    </div>
                  </CommandItem>
                ))}
              </CommandGroup>
            ))}
          </CommandList>
        </Command>
      </DropdownMenuContent>
    </DropdownMenu>
  )
}
```

### 6. MarkAsIrrelevantDialog

**File**: `app/gestionnaire/mail/_components/mark-irrelevant-dialog.tsx`

```typescript
'use client'

import { useState } from 'react'
import {
  AlertDialog,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogFooter
} from '@/components/ui/alert-dialog'
import { Button } from '@/components/ui/button'
import { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'
import { Label } from '@/components/ui/label'
import { Textarea } from '@/components/ui/textarea'
import { Ban } from 'lucide-react'
import { toast } from 'sonner'

type ActionType = 'soft_delete' | 'blacklist'

interface MarkAsIrrelevantDialogProps {
  email: {
    id: string
    from_address: string
    from_name: string
    subject: string
  }
  open: boolean
  onOpenChange: (open: boolean) => void
  onSoftDelete: (emailId: string) => Promise<void>
  onBlacklist: (emailId: string, senderEmail: string, reason?: string) => Promise<void>
}

export function MarkAsIrrelevantDialog({
  email,
  open,
  onOpenChange,
  onSoftDelete,
  onBlacklist
}: MarkAsIrrelevantDialogProps) {
  const [action, setAction] = useState<ActionType>('soft_delete')
  const [reason, setReason] = useState('')
  const [loading, setLoading] = useState(false)

  const handleConfirm = async () => {
    setLoading(true)
    try {
      if (action === 'soft_delete') {
        await onSoftDelete(email.id)
        toast.success('Email hidden')
      } else {
        await onBlacklist(email.id, email.from_address, reason)
        toast.success(`ğŸš« Blocked ${email.from_address}`)
      }
      onOpenChange(false)
      setReason('')
      setAction('soft_delete')
    } catch (error) {
      toast.error('Failed to process action')
    } finally {
      setLoading(false)
    }
  }

  return (
    <AlertDialog open={open} onOpenChange={onOpenChange}>
      <AlertDialogContent className="max-w-md">
        <AlertDialogHeader>
          <AlertDialogTitle>Mark this email as irrelevant?</AlertDialogTitle>
          <AlertDialogDescription className="text-sm text-muted-foreground mt-2">
            From: <span className="font-medium text-foreground">{email.from_name}</span> ({email.from_address})
          </AlertDialogDescription>
        </AlertDialogHeader>

        <div className="space-y-4 my-4">
          <p className="text-sm font-semibold">Choose an action:</p>

          <RadioGroup value={action} onValueChange={(v) => setAction(v as ActionType)}>
            {/* Option 1: Soft Delete */}
            <div className="flex items-start space-x-3 p-3 border rounded-lg hover:bg-muted/50 cursor-pointer">
              <RadioGroupItem value="soft_delete" id="soft_delete" className="mt-1" />
              <div className="flex-1">
                <Label htmlFor="soft_delete" className="cursor-pointer font-medium">
                  Hide this email only
                </Label>
                <p className="text-xs text-muted-foreground mt-1">
                  This email will be hidden from your inbox. You can restore it later from Trash.
                </p>
              </div>
            </div>

            {/* Option 2: Blacklist */}
            <div className="flex items-start space-x-3 p-3 border rounded-lg hover:bg-muted/50 cursor-pointer">
              <RadioGroupItem value="blacklist" id="blacklist" className="mt-1" />
              <div className="flex-1">
                <Label htmlFor="blacklist" className="cursor-pointer font-medium flex items-center gap-1">
                  <Ban className="w-4 h-4" />
                  Block all future emails from this sender
                </Label>
                <p className="text-xs text-muted-foreground mt-1">
                  This email will be deleted AND all future emails from <strong>{email.from_address}</strong> will be automatically blocked.
                </p>

                {action === 'blacklist' && (
                  <div className="mt-3">
                    <Label htmlFor="reason" className="text-xs">
                      Optional reason (for team reference):
                    </Label>
                    <Textarea
                      id="reason"
                      placeholder="e.g., Promotional emails, Spam, etc."
                      value={reason}
                      onChange={(e) => setReason(e.target.value)}
                      className="mt-1 h-20 text-sm"
                    />
                  </div>
                )}
              </div>
            </div>
          </RadioGroup>
        </div>

        <AlertDialogFooter>
          <Button variant="outline" onClick={() => onOpenChange(false)} disabled={loading}>
            Cancel
          </Button>
          <Button onClick={handleConfirm} disabled={loading} variant="destructive">
            {loading ? 'Processing...' : 'Confirm'}
          </Button>
        </AlertDialogFooter>
      </AlertDialogContent>
    </AlertDialog>
  )
}
```

### 7. BlacklistManager (Settings Page)

**File**: `app/gestionnaire/settings/emails/blacklist-manager.tsx`

```typescript
'use client'

import { useState } from 'react'
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'
import { Button } from '@/components/ui/button'
import { Badge } from '@/components/ui/badge'
import { Ban, Trash2, Plus } from 'lucide-react'
import { formatDistanceToNow } from 'date-fns'
import { fr } from 'date-fns/locale'
import { toast } from 'sonner'

interface BlacklistEntry {
  id: string
  sender_email: string
  sender_domain: string | null
  reason: string | null
  blocked_by_user_name: string
  is_current_user: boolean
  created_at: string
}

interface BlacklistManagerProps {
  blacklist: BlacklistEntry[]
  onUnblock: (blacklistId: string) => Promise<void>
  onAddManual: () => void
}

export function BlacklistManager({
  blacklist,
  onUnblock,
  onAddManual
}: BlacklistManagerProps) {
  const [loading, setLoading] = useState<string | null>(null)

  const handleUnblock = async (id: string, email: string) => {
    setLoading(id)
    try {
      await onUnblock(id)
      toast.success(`Unblocked ${email}`)
    } catch (error) {
      toast.error('Failed to unblock sender')
    } finally {
      setLoading(null)
    }
  }

  return (
    <Card>
      <CardHeader className="flex flex-row items-center justify-between">
        <div>
          <CardTitle className="flex items-center gap-2">
            <Ban className="w-5 h-5" />
            Blocked Senders ({blacklist.length})
          </CardTitle>
          <CardDescription className="mt-1">
            Emails from these senders will be automatically ignored
          </CardDescription>
        </div>
        <Button onClick={onAddManual} size="sm">
          <Plus className="w-4 h-4 mr-1" />
          Add manually
        </Button>
      </CardHeader>

      <CardContent>
        {blacklist.length === 0 ? (
          <div className="text-center py-8 text-muted-foreground">
            <Ban className="w-12 h-12 mx-auto mb-3 opacity-50" />
            <p>No blocked senders yet</p>
          </div>
        ) : (
          <div className="space-y-3">
            {blacklist.map((entry) => (
              <div
                key={entry.id}
                className="flex items-start justify-between p-3 border rounded-lg hover:bg-muted/50"
              >
                <div className="flex-1">
                  <div className="flex items-center gap-2 mb-1">
                    <span className="font-medium">
                      {entry.sender_domain ? `@${entry.sender_domain}` : entry.sender_email}
                    </span>
                    {entry.sender_domain && (
                      <Badge variant="secondary" size="sm">
                        Entire domain
                      </Badge>
                    )}
                  </div>

                  {entry.reason && (
                    <p className="text-sm text-muted-foreground mb-1">
                      Reason: {entry.reason}
                    </p>
                  )}

                  <p className="text-xs text-muted-foreground">
                    Blocked by: {entry.is_current_user ? 'You' : entry.blocked_by_user_name}
                    {' â€¢ '}
                    {formatDistanceToNow(new Date(entry.created_at), {
                      addSuffix: true,
                      locale: fr
                    })}
                  </p>
                </div>

                <Button
                  variant="ghost"
                  size="sm"
                  onClick={() => handleUnblock(entry.id, entry.sender_email)}
                  disabled={loading === entry.id}
                >
                  <Trash2 className="w-4 h-4 mr-1" />
                  Unblock
                </Button>
              </div>
            ))}
          </div>
        )}
      </CardContent>
    </Card>
  )
}
```

---

## Accessibility Checklist

### WCAG 2.1 AA Compliance

- [ ] **Color Contrast**:
  - [ ] Text: 4.5:1 minimum (normal), 3:1 (large)
  - [ ] UI components: 3:1 minimum
  - [ ] Verified with WebAIM Contrast Checker

- [ ] **Keyboard Navigation**:
  - [ ] All interactive elements focusable (Tab)
  - [ ] Logical tab order (top to bottom, left to right)
  - [ ] Focus indicators visible (2px blue ring)
  - [ ] Keyboard shortcuts documented
  - [ ] Escape key closes modals/dropdowns

- [ ] **Screen Reader**:
  - [ ] Semantic HTML (`<nav>`, `<main>`, `<aside>`)
  - [ ] ARIA labels on icon-only buttons
  - [ ] Live regions for notifications ("N new emails")
  - [ ] Alt text on images/icons
  - [ ] Heading hierarchy (h1 â†’ h2 â†’ h3)

- [ ] **Touch Targets**:
  - [ ] Minimum 44px Ã— 44px
  - [ ] Adequate spacing between targets (8px)

- [ ] **Forms**:
  - [ ] Labels associated with inputs (`<label for="...">`)
  - [ ] Error messages announced
  - [ ] Required fields indicated

- [ ] **Motion**:
  - [ ] Respect `prefers-reduced-motion`
  - [ ] No auto-playing animations
  - [ ] Smooth scroll optional

---

## Mobile Responsive Strategy

### Breakpoints

```typescript
const breakpoints = {
  mobile: '< 768px',
  tablet: '768px - 1023px',
  desktop: '1024px+'
}
```

### Responsive Layout Patterns

**Desktop (1024px+)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sidebarâ”‚ Email List â”‚ Email Detail â”‚
â”‚ 250px  â”‚ 400px      â”‚ Flex         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Tablet (768-1023px)**:
```
â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜°â”‚ Email List â”‚ Email Detail â”‚
â”‚50â”‚ 300px      â”‚ Flex         â”‚
â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Sidebar collapses to icons only
- Internal chat stacks below email (not side-by-side)

**Mobile (< 768px)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email List         â”‚
â”‚ (Full Width)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“ Tap email
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email Detail       â”‚
â”‚ (Full Screen)      â”‚
â”‚ [â† Back]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Single column
- Slide-out sidebar (hamburger menu)
- Bottom navigation: Inbox | Search | Compose
- Internal chat as separate tab

### Tailwind Responsive Classes

```typescript
// Sidebar
<aside className="
  w-[250px]          // Desktop
  md:w-[60px]        // Tablet (icons only)
  max-md:hidden      // Mobile (slide-out)
">

// Email List
<div className="
  w-[400px]          // Desktop
  md:w-[300px]       // Tablet
  max-md:w-full      // Mobile
">

// Internal Chat
<div className="
  h-[40%]            // Desktop (40% of content)
  md:h-auto md:mt-4  // Tablet (stacks below)
  max-md:hidden      // Mobile (separate tab)
">
```

---

## Performance Optimization

### Virtual Scrolling (react-window)

For email lists > 100 items, use virtualization to render only visible emails:

```typescript
import { FixedSizeList } from 'react-window'

export function VirtualizedEmailList({ emails }: { emails: Email[] }) {
  return (
    <FixedSizeList
      height={800}
      itemCount={emails.length}
      itemSize={80}  // Height per email item
      width="100%"
    >
      {({ index, style }) => (
        <div style={style}>
          <EmailListItem email={emails[index]} />
        </div>
      )}
    </FixedSizeList>
  )
}
```

### Image Lazy Loading

```typescript
// Email body rendering
<img
  src={imageUrl}
  loading="lazy"  // Native lazy loading
  alt={altText}
/>
```

### Debounced Search

```typescript
import { useDebouncedCallback } from 'use-debounce'

const debouncedSearch = useDebouncedCallback(
  (query: string) => {
    // API call here
  },
  300  // 300ms delay
)
```

### Code Splitting

```typescript
// Dynamic import for heavy components
const EmailComposer = dynamic(() => import('./email-composer'), {
  loading: () => <Skeleton className="h-[400px]" />,
  ssr: false  // Client-side only
})
```

---

## Estimated Implementation Complexity

### Development Time Breakdown

| Variant | Backend | Frontend | Testing | Total |
|---------|---------|----------|---------|-------|
| **Minimalist** | 30h | 40h | 10h | **80h** (2 weeks) |
| **Balanced** | 40h | 70h | 10h | **120h** (3 weeks) |
| **Power User** | 50h | 90h | 20h | **160h** (4 weeks) |

### Complexity Factors

**Low Complexity** âœ…:
- Mailbox sidebar (reuse shadcn/ui components)
- Email list rendering
- Email body HTML sanitization
- Link to building/lot dropdown

**Medium Complexity** ğŸŸ¡:
- IMAP/SMTP integration (use existing guide)
- Shared draft feature (Supabase Realtime)
- Internal chat integration (reuse `ChatInterface`)
- Full-text search (PostgreSQL `to_tsvector`)

**High Complexity** ğŸ”´:
- Keyboard shortcuts (50+ bindings)
- Command palette (Cmd+K)
- Saved searches (query builder)
- Real-time typing indicators
- Conflict resolution (collaborative editing)

---

## Reusable SEIDO Components

### From Interventions

- **`ChatInterface`** (`components/chat/chat-interface.tsx`)
  - âœ… Real-time messaging
  - âœ… Typing indicators
  - âœ… File attachments
  - âœ… Participant management
  - **Adaptation**: Pass `threadId={`email-${emailId}`}` to create email-specific conversation

- **`FileUploader`** (`components/ui/file-uploader.tsx`)
  - âœ… Drag & drop
  - âœ… File validation
  - âœ… Supabase Storage integration
  - **Adaptation**: Reuse for email attachments (both upload and display)

### From Existing UI

- All shadcn/ui components (50+)
- `ScrollArea`, `Card`, `Badge`, `Button`, `Input`, `Dropdown`, `Command`, etc.
- No custom styling needed (Tailwind + design tokens)

---

## Summary

This document provides **three complete design variants** for SEIDO's email management interface:

1. **Minimalist** (2 weeks): Clean, spacious, low-volume teams
2. **Balanced** (3 weeks): **Recommended** - Front-inspired, optimal density, typical teams
3. **Power User** (4 weeks): Maximum features, keyboard-first, high-volume teams

**Recommended Choice**: **Variant 2 (Balanced)** for most SEIDO teams (5-10 gestionnaires, 50-200 emails/day).

**Next Steps**:
1. Review designs with stakeholders
2. Choose variant (default: Balanced)
3. Follow 4-week implementation roadmap
4. Integrate with existing SEIDO components (`ChatInterface`, `FileUploader`)
5. Test accessibility (WCAG 2.1 AA)
6. Deploy to production

---

**Document Version**: 1.0
**Last Updated**: 2025-11-05
**Author**: SEIDO UI/UX Design Team
**Status**: Ready for Review
